# back-end-jeweltime üèóÔ∏è üíé ‚öíÔ∏è

## Overview

`back-end-jeweltime` is the backend component of Jewel Time, a web application that serves as a digital field notebook for jewelers. Designed to support the creative process, it offers features such as project tracking and retrieval of current precious metal prices. Crafted as a capstone project for Ada Developers Academy Cohort 19, it leverages Flask and MongoDB to organize and monitor metalsmithing efforts.

## Collaboration

Built in collaboration with [Angie Contreras](https://github.com/AngieCCo) who built the frontend with React. Check out our [frontend repository](https://github.com/AngieCCo/front-end-jeweltime).

## Technologies Used

- Flask
- MongoDB
- Flask-PyMongo
- Marshmallow

## Endpoints

### Accounts

#### Create an Account

- **POST** `/accounts`  
- **Request Body:**
    ```json
    {
        "email": "moira.rose@sc.com",
        "firstName": "Moira",
        "lastName": "Rose",
        "zipcode": "90210",
        "firebaseId": "FirebaseAuthenticationID12345" 
    }
    ```
- **Response Body (201 Created):**
    ```json
    {
        "accountId": "JewelTimeAccountID67890", 
        "email": "moira.rose@sc.com",
        "firebaseId": "FirebaseAuthenticationID12345", 
        "firstName": "Moira",
        "lastName": "Rose",
        "zipcode": "90210"
    }
    ```

#### Retrieve an Account

- **GET** `/accounts/<accountId>`
  
- **Example URL:** `https://jeweltime-api.onrender.com/accounts/JewelTimeAccountID67890` 
  
- **Response Body (200 OK):**
    ```json
    {
        "accountId": "JewelTimeAccountID67890", 
        "email": "moira.rose@sc.com",
        "firebaseId": "FirebaseAuthenticationID12345", 
        "firstName": "Moira",
        "lastName": "Rose",
        "zipcode": "90210"
    }
    ```

#### Retrieve Account by Firebase ID (Sign In)

- **POST** `/signin`
- **Request Body:**
    ```json
    {
        "firebaseId": "FirebaseAuthenticationID12345" 
    }
    ```
- **Response Body (200 OK):**
    ```json
    {
        "accountId": "JewelTimeAccountID67890", 
        "email": "moira.rose@sc.com",
        "firebaseId": "FirebaseAuthenticationID12345", 
        "firstName": "Moira",
        "lastName": "Rose",
        "zipcode": "90210"
    }
    ```
#### Update an Account

- **PUT/PATCH** `/accounts/<accountId>`
- **Example URL:** `https://jeweltime-api.onrender.com/accounts/JewelTimeAccountID67890` 
- **Request Body:**
    ```json
    {
        "firstName": "Moira",
        "lastName": "Cawcaw",
        "zipcode": "L0C 1A0"
    }
    ```

    Note: This endpoint allows for updates to the account information, including fields that do not need to be updated. If the values match the existing data, they will not be changed. Include all the fields you wish to include in the request, even if some of them may remain the same. The email field is not updated through this endpoint due to the Firebase integration on the front end.

- **Response Body (200 OK):**
    ```json
    {
        "accountId": "JewelTimeAccountID67890", 
        "email": "moira.rose@sc.com",
        "firebaseId": "FirebaseAuthenticationID12345", 
        "firstName": "Moira",
        "lastName": "Cawcaw",
        "zipcode": "L0C 1A0"
    }
    ```

#### Delete an Account

- **DELETE** `/accounts/<accountId>`: Delete an account
- **Example URL:** `https://jeweltime-api.onrender.com/accounts/JewelTimeAccountID67890`
  
- **Response Body (200 OK):**
    ```json
    {
        "message": "Account and its projects deleted successfully"
    }
    ```


### Projects

- **POST** `/projects`: Create a project
- **GET** `/projects/<projectId>`: Retrieve a project
- **GET** `/accounts/<accountId>/projects`: Retrieve all projects for an account
- **PUT/PATCH** `/projects/<projectId>`: Update a project
- **DELETE** `/projects/<projectId>`: Delete a project

### Metals

- **GET** `/metals/prices`: Get current prices for precious metals gold, silver, platinum, and palladium

## Validation Schemas

- Account Schema
- Project Schema

### Accounts

An account within Jewel Time can have the following fields:

- `accountId`: The unique account ID generated by MongoDB when a new account document is inserted into the database. It's a copy of the ObjectId object created by MongoDB for internal use. (Read-only)
- `firebaseId`: The Firebase ID associated with the account (Required)
- `firstName`: The first name of the account holder (Required)
- `lastName`: The last name of the account holder (Required)
- `email`: The email address associated with the account (Required)
- `zipcode`: The zip code, allowing 3 to 10 characters, suitable for international users (Required)

These fields are validated to ensure proper formatting, such as email validation and zipcode length.

### Projects

A project within Jewel Time can have the following fields, which can be added and modified:

- `accountId`: The account ID associated with the project (Required)
- `projectId`: The unique project ID generated by MongoDB when a new project document is inserted into the database. It's a copy of the ObjectId object created by MongoDB for internal use. (Read-only)
- `projectName`: The name of the project (Required)
- `description`: A description of the project, max 300 characters (Required)
- `startedAt`: The start date of the project (Required)
- `completedAt`: The completion date of the project (Optional)
- `hoursSpent`: The number of hours spent on the project (Optional)
- `materialsCost`: The cost of materials used in the project (Optional)
- `materials`: The materials used in the project (Optional)
- `metals`: The metals used in the project (Optional)
- `gemstones`: The gemstones used in the project (Optional)
- `notes`: Additional notes related to the project (Optional)
- `shape`: The shape of the jewelry (Optional)
- `jewelryType`: The type of jewelry being crafted (Optional)

These fields are validated according to specific requirements, such as the description length and the relationship between start and completion dates.


## Installation

Fork, clone the repository, then install dependencies:

```bash
git clone https://github.com/lyudarkim/back-end-jeweltime.git
cd back-end-jeweltime
pip install -r requirements.txt
```

## Running the Application

To run the application, execute the following command in your terminal:

```bash
python3 run.py
```

Visit `http://localhost:5000` and append the desired endpoint to access the application.

## Testing MongoDB Connection

To test the connection to the MongoDB database, you can use the `connection.py` file in the project root.

## License

This project is licensed under the MIT License.

